<aside>
    <div class="sidebar">
        <div class="sidebar-container">
            {% for imp in dynamics.sidebar.top %}
                {% include imp %}
            {% endfor %}

            <div class="toc-wrapper">
                <div class="toc-button" onclick="toggleToc()">âŒ</div> <!-- ç‚¹å‡»æŒ‰é’® -->
                <div class="toc">
                    <div class="toc-title-container">
                        <div class="toc-title">
                            ğŸ—ºï¸æœ¬é¡µé¢åŒ…å«çš„å†…å®¹ï¼š
                        </div>
                    </div>
                    <div class="toc-container">
                        <!-- è¿™é‡Œçš„å†…å®¹å°†é€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>

            {% for imp in dynamics.sidebar.bottom %}
                {% include imp %}
            {% endfor %}
        </div>
    </div>
</aside>

<style>
.sidebar-container {
    position: relative; /* æ”¹ä¸º relativeï¼Œç¡®ä¿å…¶ä»–å†…å®¹æ­£å¸¸æµåŠ¨ */
}

.toc-wrapper {
    position: relative; /* ä¿æŒç›¸å¯¹å®šä½ï¼Œä¾¿äºå­å…ƒç´ å®šä½ */
}

/* æŒ‰é’®æ ·å¼ */
.toc-button {
    position: fixed; /* å›ºå®šå®šä½ */
    right: 20px; /* è·ç¦»å³è¾¹çš„è·ç¦» */
    top: 300px; /* è·ç¦»é¡¶éƒ¨çš„è·ç¦»ï¼Œå‘ä¸‹ç§»åŠ¨äº† 100px çš„ä½ç½® */
    display: inline-block; /* é»˜è®¤çŠ¶æ€æ˜¾ç¤ºä¸ºæŒ‰é’® */
    width: 75px; /* æŒ‰é’®å®½åº¦ */
    height: 30px; /* æŒ‰é’®é«˜åº¦ */
    background-color: rgba(255, 255, 255, 0.8); /* ç£¨ç ‚ç™½è‰²èƒŒæ™¯ */
    color: #007bff; /* æŒ‰é’®æ–‡å­—é¢œè‰² */
    text-align: center; /* æ–‡å­—å±…ä¸­ */
    line-height: 30px; /* è¡Œé«˜ä½¿æ–‡å­—å±…ä¸­ */
    cursor: pointer; /* é¼ æ ‡ç§»ä¸Šå»æ˜¾ç¤ºæ‰‹å½¢å…‰æ ‡ */
    border: none; /* å»é™¤è¾¹æ¡† */
    z-index: 100; /* ç¡®ä¿æŒ‰é’®åœ¨æœ€ä¸Šå±‚ */
    border-radius: 15px; /* åœ†è§’æ•ˆæœ */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* æ·»åŠ é˜´å½±æ•ˆæœ */
}

/* é•¿æ–¹å½¢çš„æ ·å¼ */
.toc {
    display: block; /* é»˜è®¤éšè— toc */
    width: 300px !important; /* ç‚¹å‡»åå®½åº¦ */
    height: auto; /* é«˜åº¦è‡ªåŠ¨è°ƒæ•´ */

    background-image: url('https://ice.frostsky.com/2024/11/02/80d7b4bc93547e56a76a8625a26a7461.jpeg'); /* æ·»åŠ èƒŒæ™¯å›¾ç‰‡ */
    background-size: 456%; /* èƒŒæ™¯å¤§å° */
    background-position: center; /* èƒŒæ™¯ä¸­å¿ƒå¯¹é½ */
    
    border: 1px solid #ccc; /* è¾¹æ¡† */
    position: fixed; /* å›ºå®šå®šä½ä»¥ä¾¿ä¸è¢«é®æŒ¡ */
    z-index: 99; /* z-index å€¼ä½äºæŒ‰é’® */
    right: 20px; /* ä¸ä¸æŒ‰é’®é‡å ï¼Œè·ç¦»å³è¾¹çš„è·ç¦» */
    top: 333px; /* ä¸æŒ‰é’®çš„é¡¶éƒ¨ä½ç½®ä¸€è‡´ */
    text-shadow: 2px 2px 3px rgba(0, 0, 0, 1.23); /* ä¿ç•™æ–‡æœ¬é˜´å½± */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5); /* æ·»åŠ é˜´å½±æ•ˆæœ */
}

.toc-container {
    color: white !important;

    background-color: rgba(0, 0, 0, 0.3); /* ç£¨ç ‚é»‘è‰²èƒŒæ™¯ */
    backdrop-filter: brightness(0.96) blur(1.23px); /* åº”ç”¨äº®åº¦å’Œæ¨¡ç³Šæ•ˆæœ*/
    
    border-radius: 6px; /* åœ†è§’æ•ˆæœ */
    
    text-shadow: 2px 2px 3px rgba(0, 0, 0, 1.23); /* ä¿ç•™æ–‡æœ¬é˜´å½± */
    padding-left: 10px; /* æ·»åŠ ä¸€äº›å·¦å†…è¾¹è· */
}
.toc-title{
    color: white !important;
    text-shadow: 2px 2px 3px rgba(0, 0, 0, 1.23); /* ä¿ç•™æ–‡æœ¬é˜´å½± */
}
/* ä¸ºä¸åŒçº§åˆ«çš„æ ‡é¢˜è®¾ç½®ä¸åŒçš„ç¼©è¿› */
.toc-container h2 {
    margin: 5px 0; /* æ·»åŠ ä¸Šä¸‹è¾¹è· */
}

.toc-container h3 {
    margin: 5px 0; /* æ·»åŠ ä¸Šä¸‹è¾¹è· */
    padding-left: 15px; /* å‚ç›´ç¼©è¿› */
}

.toc-container h4 {
    margin: 5px 0; /* æ·»åŠ ä¸Šä¸‹è¾¹è· */
    padding-left: 30px; /* æ›´æ·±çš„ç¼©è¿› */
}

.toc-container a {
    color: white; /* TOC ä¸­é“¾æ¥çš„æ–‡å­—é¢œè‰² */
    text-size:80;
    text-shadow: 2px 2px 3px rgba(0, 0, 0, 1.23); /* ä¿ç•™æ–‡æœ¬é˜´å½± */
    text-decoration: none; /* å–æ¶ˆä¸‹åˆ’çº¿ */
}

.toc-container a:hover {
    text-decoration: underline; /* æ‚¬åœæ—¶æ·»åŠ ä¸‹åˆ’çº¿ */
}
</style>

<script>
function toggleToc() {
    var tocButton = document.querySelector('.toc-button');
    var toc = document.querySelector('.toc .toc-container');

    // æ¸…ç©º TOC å†…å®¹
    toc.innerHTML = '';

    // è·å–æ‰€æœ‰ <h2>, <h3>, <h4> æ ‡ç­¾
    var headers = document.querySelectorAll('h2, h3, h4');

    headers.forEach(function(header) {
        var titleText = header.innerText.trim();
        var headerId = titleText.replace(/\s+/g, '-').toLowerCase(); // åˆ›å»ºé”šç‚¹ ID
        header.id = headerId; // ä¸ºæ¯ä¸ªæ ‡é¢˜è®¾ç½®ç›¸åº”çš„ ID

        var tocItem;
        if (header.tagName === 'H2') {
            tocItem = `<div><a href="#${headerId}">â”—${titleText}</a></div>`;
        } else if (header.tagName === 'H3') {
            tocItem = `<div style="padding-left: 20px;"><a href="#${headerId}">â”—${titleText}</a></div>`;
        } else if (header.tagName === 'H4') {
            tocItem = `<div style="padding-left: 40px;"><a href="#${headerId}">â”—${titleText}</a></div>`;
        }

        toc.innerHTML += tocItem; // å°†ç¬¦åˆæ¡ä»¶çš„æ ‡é¢˜åŠ å…¥ TOC
    });

    // åˆ‡æ¢æ˜¾ç¤º/éšè— TOC
    if (toc.parentElement.style.display === "none" || toc.parentElement.style.display === "") {
        toc.parentElement.style.display = "block"; // æ˜¾ç¤º TOC
        tocButton.innerHTML = "âŒ"; // æ›´æ–°æŒ‰é’®ä¸ºå…³é—­å›¾æ ‡
    } else {
        toc.parentElement.style.display = "none"; // éšè— TOC
        tocButton.innerHTML = "ğŸ—ºï¸ç›®å½•"; // æ›´æ–°æŒ‰é’®ä¸ºæ‰“å¼€å›¾æ ‡
    }
}

// åˆå§‹çŠ¶æ€
//document.querySelector('.toc').style.display = "none"; // åˆå§‹åŒ–æ—¶éšè— toc

// åˆå§‹çŠ¶æ€ï¼Œç¡®ä¿ TOC é»˜è®¤å¯è§
toggleToc();
</script>

