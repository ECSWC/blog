
 <style>
    .toc {
        background: rgba(255, 255, 255, 0.9); /* ç™½è‰²èƒŒæ™¯ */
        backdrop-filter: blur(10px);          /* ç£¨ç ‚æ•ˆæœ */
        padding: 10px;
        position: fixed;                       /* å›ºå®šå®šä½ */
        top: 10%;                             /* è·ç¦»é¡¶éƒ¨10% */
        right: 10px;                          /* è·ç¦»å³ä¾§10px */
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        display: none;                        /* åˆå§‹éšè— */
        max-height: 80%;                      /* æœ€å¤§é«˜åº¦ */
        overflow-y: auto;                     /* å…è®¸ç«–å‘æ»šåŠ¨ */
        z-index: 1000;                        /* ç¡®ä¿åœ¨ä¸Šæ–¹ */
    }

    .toc-title {
        font-weight: bold;
        margin-bottom: 10px;
    }

    .toc-button {
        position: fixed;                      /* å›ºå®šå®šä½ */
        top: 50%;                            /* å‚ç›´å±…ä¸­ */
        right: 15px;                         /* è·ç¦»å³ä¾§15px */
        transform: translateY(-50%);         /* å‚ç›´å±…ä¸­ä¿®æ­£ */
        z-index: 1001;                       /* ç¡®ä¿æŒ‰é’®åœ¨ä¸Šé¢ */
        background: white;                   /* æŒ‰é’®èƒŒæ™¯ */
        border: none;                        /* æ— è¾¹æ¡† */
        padding: 10px;                       /* å†…è¾¹è· */
        border-radius: 5px;                  /* åœ†è§’ */
        cursor: pointer;                     /* é¼ æ ‡æ‰‹åŠ¿ */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .toc a {
        color: black;                       /* å­—ä½“é¢œè‰² */
        text-decoration: none;              /* å»æ‰ä¸‹åˆ’çº¿ */
    }

    .toc ul {
        list-style-type: none;              /* å»æ‰åˆ—è¡¨æ ‡è®° */
        padding-left: 0;                    /* ä¸éœ€è¦å·¦è¾¹è· */
        margin: 0;                          /* å»æ‰å¤–è¾¹è· */
    }

    .toc ul li {
        margin-left: 15px;                  /* åªåœ¨æ¯ä¸ªé¡¹å·¦è¾¹å¢åŠ å¤–è¾¹è·ä»¥ç¼©è¿› */
    }

    .toc ul ul li {
        margin-left: 15px;                  /* è¿›ä¸€æ­¥ç¼©è¿›å­æ ‡é¢˜ */
    }
</style>


<button class="toc-button" id="toggle-toc">
    <div>ğŸ—ºï¸</div>
    <div style="font-size: 12px;">ç‚¹å‡»æ˜¾ç¤º TOC</div>
</button>

<aside>
    <div class="toc" id="toc-container">
        <div class="toc-title-container">
            <div class="toc-title">
                ğŸ—ºï¸ æœ¬é¡µé¢å†…å®¹ï¼š
            </div>
        </div>
        <div class="toc-container">
            <ul id="toc-list"></ul>
        </div>
    </div>
</aside>



<script>
    document.addEventListener('DOMContentLoaded', function() {
        const tocList = document.getElementById('toc-list');
        const tocContainer = document.getElementById('toc-container');
        const toggleButton = document.getElementById('toggle-toc');

        // åªé€‰æ‹©å¸¦ç±»çš„ h2, h3, h4
        const headers = document.querySelectorAll('main h2[class], main h3[class], main h4[class]');

        // åˆ›å»º TOC æ¡ç›®
        headers.forEach(function(header) {
            const title = header.innerText;
            const id = encodeURIComponent(title)
                .replace(/%20/g, '-')          // æ›¿æ¢ %20 ä¸º -
                .replace(/[^\w-]+/g, '');      // ç§»é™¤æ— æ•ˆå­—ç¬¦

            header.setAttribute('id', id); // è®¾ç½®é”šç‚¹ ID

            const level = header.tagName.toLowerCase(); // è·å–æ ‡é¢˜çº§åˆ«
            const listItem = document.createElement('li');

            listItem.innerHTML = `<a href="#${id}">${title}</a>`; // ç»§ç»­ä¿æŒé“¾æ¥

            // æŒ‰æ ‡é¢˜å…³ç³»ç¼©è¿›
            if (level === 'h3') {
                const h2Item = tocList.querySelector(`li > a[href="#${id.split('-')[0]}"]`);
                if (h2Item) {
                    const parentLi = h2Item.parentNode;
                    let sublist = parentLi.querySelector('ul');
                    if (!sublist) {
                        sublist = document.createElement('ul');
                        parentLi.appendChild(sublist);
                    }
                    sublist.appendChild(listItem);
                } else {
                    tocList.appendChild(listItem);
                }
            } else if (level === 'h4') {
                const h3Item = tocList.querySelector(`li ul li > a[href="#${id.split('-')[0]}"]`);
                if (h3Item) {
                    const parentLi = h3Item.parentNode;
                    let sublist = parentLi.querySelector('ul');
                    if (!sublist) {
                        sublist = document.createElement('ul');
                        parentLi.appendChild(sublist);
                    }
                    sublist.appendChild(listItem);
                }
            } else {
                tocList.appendChild(listItem);
            }
        });

        // åˆ‡æ¢ TOC æ˜¾ç¤ºå’Œéšè—
        toggleButton.addEventListener('click', function() {
            if (tocContainer.style.display === "none" || tocContainer.style.display === "") {
                tocContainer.style.display = "block"; // å±•å¼€ TOC
                toggleButton.innerText = "éšè— TOC"; // ä¿®æ”¹æŒ‰é’®æ–‡æœ¬
            } else {
                tocContainer.style.display = "none"; // éšè— TOC
                toggleButton.innerText = "æ˜¾ç¤º TOC"; // ä¿®æ”¹æŒ‰é’®æ–‡æœ¬
            }
        });
    });
</script>
