
    <style>
        
        .toc {
            background: rgba(0, 0, 0, 0.8); /* åŠé€æ˜èƒŒæ™¯ */
            backdrop-filter: blur(10px);          /* ç£¨ç ‚æ•ˆæœ */
            padding: 10px;
            position: absolute;                    /* ç»å¯¹å®šä½ */
            top: 10px;                             /* æ‚¬æµ®åœ¨å·¦ä¸Šè§’ */
            right: 10px;                            /* æ‚¬æµ®åœ¨å·¦ä¸Šè§’ */
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            display: none;                         /* åˆå§‹éšè— */
        }

        .toc-title {
            font-weight: bold;
        }

        .toc-button {
            position: fixed;                       /* å›ºå®šå®šä½ */
            top: 10px;
            right: 10px;
            z-index: 1000;                        /* ç¡®ä¿æŒ‰é’®åœ¨ä¸Šé¢ */
        }

        .toc a {
            color: white;                          /* å­—ä½“é¢œè‰² */
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); /* é˜´å½±æ•ˆæœ */
        }

        .toc ul {
            list-style-type: none;                 /* å»æ‰åˆ—è¡¨æ ‡è®° */
            padding-left: 15px;                    /* ç¼©è¿› */
        }

        .toc ul ul {
            margin-left: 10px;                     /* è¿›ä¸€æ­¥ç¼©è¿›å­æ ‡é¢˜ */
        }
        
        
    </style>


<button class="toc-button" id="toggle-toc">
    <div>ğŸ—ºï¸</div>
    <div style="font-size: 12px;">ç‚¹å‡»æ˜¾ç¤º TOC</div>
</button>

<aside>
    <div class="toc" id="toc-container">
        <div class="toc-title-container">
            <div class="toc-title">
                ğŸ—ºï¸ æœ¬é¡µé¢åŒ…å«çš„å†…å®¹ï¼š
            </div>
        </div>
        <div class="toc-container">
            <ul id="toc-list"></ul>
        </div>
    </div>
</aside>


<script>
    document.addEventListener('DOMContentLoaded', function() {
        const tocList = document.getElementById('toc-list');
        const tocContainer = document.getElementById('toc-container');
        const toggleButton = document.getElementById('toggle-toc');

        // åªé€‰æ‹©å¸¦ç±»çš„ h2, h3, h4
        const headers = document.querySelectorAll('main h2[class], main h3[class], main h4[class]');

        // åˆ›å»º TOC æ¡ç›®
        headers.forEach(function(header) {
            const title = header.innerText;
            const id = encodeURIComponent(title)
                .replace(/%20/g, '-')          // æ›¿æ¢ %20 ä¸º -
                .replace(/[^\w-]+/g, '');      // ç§»é™¤æ— æ•ˆå­—ç¬¦

            header.setAttribute('id', id); // è®¾ç½®é”šç‚¹ ID

            const level = header.tagName.toLowerCase(); // è·å–æ ‡é¢˜çº§åˆ«
            const listItem = document.createElement('li');

            listItem.innerHTML = `<a href="#${id}">${title}</a>`; // ç»§ç»­ä¿æŒé“¾æ¥

            // åµŒå¥—å¤„ç†
            if (level === 'h3') {
                const h2Item = tocList.querySelector(`li > a[href="#${id.split('-')[0]}"]`);
                if (h2Item) {
                    const parentLi = h2Item.parentNode;
                    let sublist = parentLi.querySelector('ul');
                    if (!sublist) {
                        sublist = document.createElement('ul');
                        parentLi.appendChild(sublist);
                    }
                    sublist.appendChild(listItem);
                } else {
                    tocList.appendChild(listItem);
                }
            } else if (level === 'h4') {
                const h3Item = tocList.querySelector(`li ul li > a[href="#${id.split('-')[0]}"]`);
                if (h3Item) {
                    const parentLi = h3Item.parentNode;
                    let sublist = parentLi.querySelector('ul');
                    if (!sublist) {
                        sublist = document.createElement('ul');
                        parentLi.appendChild(sublist);
                    }
                    sublist.appendChild(listItem);
                }
            } else {
                tocList.appendChild(listItem);
            }
        });

        // åˆ‡æ¢ TOC æ˜¾ç¤ºå’Œéšè—
        toggleButton.addEventListener('click', function() {
            if (tocContainer.style.display === "none" || tocContainer.style.display === "") {
                tocContainer.style.display = "block"; // å±•å¼€ TOC
                toggleButton.innerText = "éšè— TOC"; // ä¿®æ”¹æŒ‰é’®æ–‡æœ¬
            } else {
                tocContainer.style.display = "none"; // éšè— TOC
                toggleButton.innerText = "æ˜¾ç¤º TOC"; // ä¿®æ”¹æŒ‰é’®æ–‡æœ¬
            }
        });
    });
</script>
